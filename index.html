<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Dorking Ladies Joggers</title>

	<meta name="description" content="Home of Ladies Run Club in Dorking, Surrey">

	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#603cba">
	<meta name="theme-color" content="#ffffff">

</head>

<body>

<header>
	<div class="container-fluid">
		<div class="row pl-3 pt-3 bg-light justify-content-center sticky-top">
			<ul class="list-inline ">
				<li class="list-inline-item">
					<i class="fa fa-phone fa-2x align-middle text-primary"></i><span itemprop="telephone"> <a href="tel:+447555384810">07555 384 810</a></span>
				</li>
				<li class="list-inline-item">
					<i class="fa fa-envelope fa-2x align-middle text-primary"></i> <a href="mailto:admin@dorkingladiesjoggers.co.uk">admin@dorkingladiesjoggers.co.uk</a>
				</li>
				<li class="list-inline-item">
					<i class="fa fa-facebook-official fa-2x align-middle text-primary"></i> <a href="https://www.facebook.com/dorkingladiesjoggers"> facebook.com/dorkingladiesjoggers</a>
				</li>
			</ul>
		</div>

		<div class="row m-4 justify-content-center">
			<img class="img-fluid" src="images/logo.svg">
		</div>
	</div>
</header>

<main>
	<div class="container">


		<!-- Schedule Title -->

		<div class="row m-4 justify-content-center">
			<div class="col"><hr class="d-none d-sm-block"/></div>
			<div class="h4">Upcoming Courses</div>
			<div class="col"><hr class="d-none d-sm-block"/></div>
		</div>


		<!-- Schedule Table-->

		<div class="row mb-4 justify-content-center">
			<div class="col">
				<table class="table table-sm table-striped">
					<thead>
					<tr>
						<th scope="col">Day</th>
						<th scope="col">Time</th>
						<th scope="col">Group</th>
						<th scope="col">Meeting Place</th>
					</tr>
					</thead>
					<tbody>
					<tr>
						<th scope="row">Wednesday</th>
						<td>09:15</td>
						<td>Introduction to Trail Running</td>
						<td>Dorking Garden Centre, Dorking</td>
					</tr>
					</tbody>
				</table>
			</div>
		</div>

		<hr/>


		<!-- Registration -->

		<div class="row m-4 pt-4 pb-4 align-items-center">


			<!-- Registration Message -->

			<div class="col-md-6 col-sm-12">
				<h4 class="text-center text-md-right">Get your first run for <span class="text-success font-italic">FREE!</span></h4>

				<p class="text-center text-md-right">Simply register your details and follow the instructions in the email to claim your free token</p>
				<p class="font-weight-light text-center text-md-right border-left border-right pl-2 pr-2 border-warning" style="font-size: .75em">If you haven't got a mail in your <strong>Inbox</strong> in the next minute or two, it's probably sitting
					in your Junk/Spam folder. Open it and click <strong> Not Junk</strong> to avoid missing out!</p>
			</div>

			<!-- Registration Form -->

			<div class="col-md-6 col-sm-12">
				<form id="enquiry-form">
					<div class="row form-group">


						<!-- First name -->

						<div class="col-6">
							<input type="text" class="form-control" name="firstName" autocomplete="home firstName" placeholder="First name" required>
						</div>


						<!-- Last name -->

						<div class="col-6">
							<input type="text" class="form-control" name="lastName" autocomplete="home lastName" placeholder="Last name" required>
						</div>
					</div>


					<!-- Phone number -->

					<div class="row form-group">
						<div class="col">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-fw fa-phone"></i></span>
								</div>
								<input type="tel" class="form-control" name="phone" autocomplete="home phone" placeholder="Phone number (optional)">
							</div>
						</div>
					</div>


					<!-- Email Address-->

					<div class="row form-group">
						<div class="col">
							<div class="input-group">
								<div class="input-group-prepend">
									<span class="input-group-text"><i class="fa fa-fw fa-envelope"></i></span>
								</div>
								<input type="email" id="email" name="email" autocomplete="home email" class="form-control" placeholder="me@home.com" required>
								<div class="input-group-append">
									<button type="submit" class="btn btn-info"><i class="fa fa-fw fa-send" style="-webkit-filter: blur(0)"></i></button>
								</div>
							</div>
						</div>
					</div>

				</form>
				<div class="row justify-content-center">
					<div class="col">
						<div id="form-errors" class="alert alert-danger d-none" role="alert">
							<ul class="list-unstyled mb-0"></ul>
						</div>

						<div id="form-success" class="card border-0 text-center d-none" role="alert">
							<div class="card-body">
								<h4><i class="text-success align-middle fa fa-fw fa-2x fa-check-circle"></i> Thanks for Registering!</h4>
								<small class="text-muted">Confirmation has been sent to: <span id="confirm-email" class="text-info"></span><br/>
									(Please note the information regarding Junk/Spam)
								</small>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
</main>

<footer style="font-size: .75em" class="mt-3">
	<div class="container-fluid bg-light text-secondary">
		<div class="row pt-3 text-center justify-content-center">
			<div class="col-2">
				Mens
				<ul class="list-unstyled">
					<li><a href="http://www.reigatemensjoggers.co.uk">Reigate</a></li>
				</ul>
			</div>
			<div class="col-auto">
				Ladies
				<ul class="list-unstyled">
					<li><a href="http://www.reigateladiesjoggers.co.uk">Reigate</a></li>
					<li><a href="http://www.caterhamladiesjoggers.co.uk">Caterham</a></li>
					<li><a href="http://www.horshamladiesjoggers.co.uk">Horsham</a></li>
					<li><a href="http://www.oxtedladiesjoggers.co.uk">Oxted</a></li>
				</ul>
			</div>
			<div class="col-2">
				Juniors
				<ul class="list-unstyled">
					<li><a href="http://www.reigatejuniorjoggers.co.uk">Reigate</a></li>
				</ul>
			</div>
		</div>
	</div>
</footer>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://use.fontawesome.com/71d7206d11.js"></script>

</body>

<script>

	const $enquiryForm = $('#enquiry-form');
	const $formSuccess = $('#form-success');
	const $formErrors = $('#form-errors');
	const $confirmEmail = $('#confirm-email');
  const $submitButton = $("button[type='submit']");

	$enquiryForm.submit(function (event) {

		// Stop form from submitting normally
		event.preventDefault();

		startProgress();

		const email = $enquiryForm.find("input[name='email']").val();

		$enquiryForm.toggleClass('d-none', false);
		$formSuccess.toggleClass('d-none', true);
		$formErrors.toggleClass('d-none', true);
		$formErrors.find('ul').empty();

		$.post("http://api.dorkingladiesjoggers.co.uk/enquiries/v2/club-enquiry/emails/" + email, $enquiryForm.serialize())
			.done(function (response) {
				console.log(response);
				setSuccessState(email);
			})
			.fail(function (jqxhr, textStatus, error) {
				if (jqxhr.responseJSON === undefined) {
					console.error(textStatus);
					console.error(error);

					const list = $formErrors.find('ul');
					list.append('<li>Oops! Due to a technical issue we were unable to process your request at this time. Please try again later or contact us using the details at the top of the page while we work to resolve it.</li>');
					$formErrors.toggleClass('d-none', false);
				}
				else {
					setErrorState(jqxhr.responseJSON);
				}
			})
			.always(function () {
				stopProgress();
			});
	});

	function startProgress() {
	  $submitButton.toggleClass('disabled', true).prop('disabled', true);
	  $submitButton.find('i').removeClass('fa-send').addClass('fa-circle-o-notch fa-spin');

		$('input').toggleClass('is-invalid', false);
	}

	function stopProgress() {
		$("button[type='submit']").toggleClass('disabled', false).prop('disabled', false);

	  $submitButton.find('i').addClass('fa-send').removeClass('fa-circle-o-notch fa-spin');
  }

	function setErrorState(response) {
		console.error(response);

		$enquiryForm.toggleClass('d-none', false);
		$formSuccess.toggleClass('d-none', true);
		$formErrors.toggleClass('d-none', false);

		const list = $formErrors.find('ul');

		const items = response.map(function (element) {
			return '<li>' + element.errorMessage + '</li>';
		});

		list.append(items);

		response.forEach(function (element) {
			const input = $("input[name='" + element.fieldName + "']");
			input.toggleClass('is-invalid', true);
		})
	}

	function setSuccessState(email) {
		$enquiryForm.toggleClass('d-none', true);
		$formSuccess.toggleClass('d-none', false);
		$confirmEmail.text(email);
	}

</script>

</html>